@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom base styles */
@layer base {
  * {
    box-sizing: border-box;
  }

  body {
    @apply bg-bg-primary text-text-primary font-sans;
    margin: 0;
    padding: 0;
    min-height: 100vh;
  }

  /* Focus styles for accessibility */
  *:focus-visible {
    outline: 2px solid var(--color-border-focus);
    outline-offset: 2px;
  }
}

/* Custom component classes from design system */
@layer components {
  /* Layout Variables */
  :root {
    --navbar-height: 64px;
    --sidebar-width: 256px;
    --sidebar-collapsed-width: 72px;

    /* Color Variables (for use in inline styles and CSS) */
    /* Background colors */
    --color-bg-primary: #1d2022;
    --color-bg-secondary: #262a2d;
    --color-bg-tertiary: #2f3336;
    --color-bg-hover: #363a3e;

    /* Text colors */
    --color-text-primary: #d7d3d0;
    --color-text-secondary: #a8a5a3;
    --color-text-tertiary: #7a7876;
    --color-text-placeholder: #8a8886;
    --color-text-inverse: #FFFFFF; /* For text on colored backgrounds */

    /* Accent colors */
    --color-accent-blue: #098ecf;
    --color-accent-blue-hover: #0ba3ea;
    --color-accent-blue-active: #0778ab;
    --color-accent-blue-muted: rgba(9, 142, 207, 0.2);
    --color-accent-orange: #cb4e1b;
    --color-accent-orange-hover: #e5591f;
    --color-accent-orange-active: #b3440f;
    --color-accent-orange-muted: rgba(203, 78, 27, 0.2);

    /* Semantic colors */
    --color-success: #10b981;
    --color-warning: #f59e0b;
    --color-error: #ef4444;
    --color-info: #06b6d4;

    /* Border colors */
    --color-border-primary: #3f4447;
    --color-border-secondary: #2f3336;
    --color-border-focus: #098ecf;

    /* Discord brand colors */
    --color-discord: #5865F2;
    --color-discord-hover: #4752C4;

    /* Z-index layers */
    --z-fixed: 300;
    --z-popover: 350;
    --z-notification: 400;
  }

  /* ============================================
     PURPLE DUSK THEME
     ============================================

     A warm, light theme designed for users who prefer
     brighter interfaces while maintaining visual consistency
     with the design system.

     Theme Architecture:
     - Applied via data-theme="purple-dusk" attribute on <html>
     - Overrides CSS custom properties defined in :root
     - Uses accent color mapping for seamless component theming

     Color Palette Strategy:
     - Backgrounds: Warm beige tones (#E8E3DF → #C0B8B2)
     - Text: Deep purple palette for strong contrast
     - Primary Accent: Purple (maps to accent-orange classes)
     - Secondary Accent: Pink (maps to accent-blue classes)

     WCAG Compliance:
     - text-primary on bg-primary: 7.5:1 (AAA)
     - text-secondary on bg-primary: 4.6:1 (AA)
     - All semantic colors meet AA standards on light backgrounds

     See: docs/articles/design-system.md for complete color tables
     ============================================ */
  [data-theme="purple-dusk"] {
    /* Background colors - warm beige palette
       Creates a soft, paper-like reading surface */
    --color-bg-primary: #E8E3DF;    /* HSL: 30°, 16%, 89% - Main background */
    --color-bg-secondary: #DAD4D0;  /* HSL: 24°, 14%, 84% - Cards, panels */
    --color-bg-tertiary: #CCC5C0;   /* HSL: 25°, 12%, 78% - Elevated elements */
    --color-bg-hover: #C0B8B2;      /* HSL: 24°, 13%, 72% - Hover states */

    /* Text colors - deep purple palette
       Provides excellent contrast on warm backgrounds */
    --color-text-primary: #4F214A;    /* HSL: 305°, 41%, 22% - Primary text */
    --color-text-secondary: #614978;  /* HSL: 274°, 24%, 38% - Secondary text */
    --color-text-tertiary: #887A99;   /* HSL: 269°, 14%, 54% - Muted text */
    --color-text-placeholder: #9A8DA8; /* HSL: 266°, 15%, 61% - Placeholders */

    /* Orange → Purple mapping (primary accent)
       Maps existing accent-orange Tailwind classes to purple.
       Usage: btn-primary, sidebar active states, toggles */
    --color-accent-orange: #614978;
    --color-accent-orange-hover: #7A5C8F;
    --color-accent-orange-active: #4F214A;
    --color-accent-orange-muted: rgba(97, 73, 120, 0.2);

    /* Blue → Pink mapping (secondary accent)
       Maps existing accent-blue Tailwind classes to pink.
       Usage: btn-accent, links, focus rings, info states */
    --color-accent-blue: #D5345B;
    --color-accent-blue-hover: #E5476D;
    --color-accent-blue-active: #B82A4D;
    --color-accent-blue-muted: rgba(213, 52, 91, 0.2);

    /* Semantic colors - darker variants for light background
       Ensures AA contrast on beige backgrounds */
    --color-success: #059669;  /* Emerald 600 - operations complete */
    --color-warning: #D97706;  /* Amber 600 - caution needed */
    --color-error: #DC2626;    /* Red 600 - errors, destructive */
    --color-info: #0891B2;     /* Cyan 600 - informational */

    /* Border colors - light theme appropriate
       Subtle definition without harsh contrast */
    --color-border-primary: #C0B8B2;
    --color-border-secondary: #DAD4D0;
    --color-border-focus: #614978;  /* Matches primary accent */

    /* Discord brand colors remain consistent across themes */
    --color-discord: #5865F2;
    --color-discord-hover: #4752C4;

    /* Glass effect overrides for light theme
       Frosted glass appearance on light backgrounds */
    --color-glass-bg: rgba(218, 212, 208, 0.6);
    --color-glass-bg-hover: rgba(204, 197, 192, 0.7);
    --color-glass-bg-active: rgba(192, 184, 178, 0.8);
    --color-glass-border: rgba(192, 184, 178, 0.8);
    --color-glass-border-hover: rgba(97, 73, 120, 0.5);

    /* Status colors adjusted for light background
       Used in guild status pills and indicators */
    --color-status-active: #059669;
    --color-status-active-bg: rgba(5, 150, 105, 0.15);
    --color-status-active-border: rgba(5, 150, 105, 0.35);
    --color-status-inactive: #6B7280;
    --color-status-inactive-bg: rgba(107, 114, 128, 0.15);
    --color-status-inactive-border: rgba(107, 114, 128, 0.35);

    /* Text inverse - for button text on colored backgrounds
       White provides excellent contrast on purple accent colors */
    --color-text-inverse: #FFFFFF;
  }

  /* Purple Dusk Theme - Settings Tab Overrides
     Issue #1159: Improve inactive tab visibility and button contrast
     Inactive tabs need higher contrast on light backgrounds */
  [data-theme="purple-dusk"] .settings-tab {
    /* Use text-secondary (#614978) for better contrast than default dark theme color
       Contrast ratio: ~4.6:1 on #E8E3DF background (passes WCAG AA) */
    color: var(--color-text-secondary);
  }

  [data-theme="purple-dusk"] .settings-tab:hover {
    /* Hover state uses bg-hover and text-primary for clear feedback */
    background-color: var(--color-bg-hover);
    color: var(--color-text-primary);
  }

  [data-theme="purple-dusk"] .settings-tab.active {
    /* Active tab uses purple accent with white text
       #614978 background with white text = ~6.0:1 contrast (passes WCAG AA) */
    background-color: var(--color-accent-orange);
    color: var(--color-text-inverse);
  }

  /* Purple Dusk Theme - Tab Panel Overrides
     Applies to reusable tab-panel component */
  [data-theme="purple-dusk"] .tab-panel-tab {
    /* Use text-secondary for better readability than text-tertiary */
    color: var(--color-text-secondary);
  }

  [data-theme="purple-dusk"] .tab-panel-tab.active {
    /* Active uses accent-blue (pink in purple-dusk theme) */
    color: var(--color-accent-blue);
    border-bottom-color: var(--color-accent-blue);
  }

  [data-theme="purple-dusk"] .tab-panel-tab.disabled,
  [data-theme="purple-dusk"] .tab-panel-tab[aria-disabled="true"] {
    /* Disabled tabs use tertiary with reduced opacity for clear distinction */
    color: var(--color-text-tertiary);
    opacity: 0.5;
  }

  /* Button base class */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-5 py-2.5;
    @apply text-sm font-semibold leading-6;
    @apply border border-transparent rounded-md;
    @apply cursor-pointer transition-all duration-150 ease-in-out;
    @apply whitespace-nowrap;
  }

  /* Button variants */
  .btn-primary {
    @apply bg-accent-orange text-white border-accent-orange;
  }
  .btn-primary:hover {
    @apply bg-accent-orange-hover border-accent-orange-hover;
  }
  .btn-primary:active {
    @apply bg-accent-orange-active border-accent-orange-active;
  }
  .btn-primary:disabled {
    @apply bg-text-tertiary border-text-tertiary cursor-not-allowed opacity-50;
  }

  .btn-secondary {
    @apply bg-transparent text-text-primary border-border-primary;
  }
  .btn-secondary:hover {
    @apply bg-bg-hover;
  }
  .btn-secondary:active {
    @apply bg-bg-tertiary;
  }

  .btn-accent {
    @apply bg-accent-blue text-white border-accent-blue;
  }
  .btn-accent:hover {
    @apply bg-accent-blue-hover border-accent-blue-hover;
  }
  .btn-accent:active {
    @apply bg-accent-blue-active border-accent-blue-active;
  }

  .btn-danger {
    @apply bg-error text-white border-error;
  }
  .btn-danger:hover {
    @apply bg-error-hover border-error-hover;
  }
  .btn-danger:active {
    @apply bg-error-hover border-error-hover;
  }

  /* Button sizes */
  .btn-sm {
    @apply px-3 py-1.5 text-xs;
  }
  .btn-lg {
    @apply px-6 py-3 text-base;
  }
  .btn-icon {
    @apply p-2.5;
  }

  /* Card components */
  .card {
    @apply bg-bg-secondary border border-border-primary rounded-lg overflow-hidden;
  }

  .card-header {
    @apply flex items-center justify-between px-6 py-4 border-b border-border-primary;
  }

  .card-title {
    @apply text-h5 text-text-primary;
  }

  .card-body {
    @apply p-6;
  }

  .card-footer {
    @apply flex items-center justify-between px-6 py-4 border-t border-border-primary bg-bg-primary;
  }

  .card-elevated {
    @apply bg-bg-tertiary shadow-lg;
  }

  .card-interactive {
    @apply cursor-pointer transition-all duration-200 ease-in-out;
  }
  .card-interactive:hover {
    @apply border-accent-blue -translate-y-0.5 shadow-md;
    box-shadow: 0 4px 6px -1px rgba(9, 142, 207, 0.15);
  }

  /* Enhanced Card - Dashboard Redesign */
  .card-enhanced {
    @apply relative bg-bg-secondary border border-border-primary rounded-xl overflow-hidden;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .card-enhanced:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  /* Gradient top border via ::before pseudo-element */
  .card-enhanced::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: transparent;
    transition: background 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Accent color variants */
  .card-enhanced.accent-blue::before {
    background: linear-gradient(90deg, #098ecf 0%, #0ba3ea 100%);
  }

  .card-enhanced.accent-orange::before {
    background: linear-gradient(90deg, #cb4e1b 0%, #e5591f 100%);
  }

  .card-enhanced.accent-success::before {
    background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
  }

  .card-enhanced.accent-info::before {
    background: linear-gradient(90deg, #06b6d4 0%, #22d3ee 100%);
  }

  /* Hero Metric Card - extends card-enhanced */
  .hero-metric-card {
    @apply card-enhanced;
    @apply p-6;
  }

  /* Trend Indicators */
  .trend-up {
    @apply text-success;
  }

  .trend-down {
    @apply text-error;
  }

  .trend-neutral {
    @apply text-text-tertiary;
  }

  /* Sparkline Visualization */
  .sparkline {
    @apply flex items-end gap-1;
    height: 32px;
  }

  .sparkline-bar {
    @apply flex-1 bg-accent-blue rounded-t;
    min-width: 2px;
    transition: all 0.2s ease-in-out;
  }

  .sparkline-bar:hover {
    @apply bg-accent-blue-hover;
  }

  /* Form components */
  .form-group {
    @apply flex flex-col gap-2 mb-4;
  }

  .form-label {
    @apply text-sm font-semibold text-text-primary;
  }

  .form-input {
    @apply w-full px-3.5 py-2.5 text-sm text-text-primary;
    @apply bg-bg-primary border border-border-primary rounded-md;
    @apply transition-all duration-150 ease-in-out;
  }
  .form-input::placeholder {
    @apply text-text-placeholder;
  }
  .form-input:hover {
    @apply border-accent-blue;
  }
  .form-input:focus {
    @apply outline-none border-accent-blue shadow-[0_0_0_3px_rgba(9,142,207,0.15)];
  }
  .form-input:disabled {
    @apply bg-bg-secondary text-text-tertiary cursor-not-allowed opacity-60;
  }

  .form-input.error {
    @apply border-error;
  }
  .form-input.error:focus {
    @apply shadow-[0_0_0_3px_rgba(239,68,68,0.15)];
  }

  .form-input.success {
    @apply border-success;
  }

  .form-select {
    @apply w-full px-3.5 py-2.5 text-sm text-text-primary;
    @apply bg-bg-primary border border-border-primary rounded-md;
    @apply cursor-pointer appearance-none;
    @apply transition-all duration-150 ease-in-out;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23a8a5a3' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }
  .form-select:hover {
    @apply border-accent-blue;
  }
  .form-select:focus {
    @apply outline-none border-accent-blue shadow-[0_0_0_3px_rgba(9,142,207,0.15)];
  }

  .form-help {
    @apply text-xs text-text-secondary;
  }

  .form-error {
    @apply flex items-center gap-1.5 text-xs text-error;
  }

  .form-success {
    @apply flex items-center gap-1.5 text-xs text-success;
  }

  /* Toggle switch */
  .toggle {
    @apply flex items-center gap-3 cursor-pointer;
  }

  .toggle-input {
    @apply absolute opacity-0 w-0 h-0;
  }

  .toggle-slider {
    @apply relative inline-block w-11 h-6 bg-border-primary rounded-full;
    @apply transition-colors duration-200 ease-in-out;
  }
  .toggle-slider::before {
    content: "";
    @apply absolute top-0.5 left-0.5 w-5 h-5 bg-text-primary rounded-full;
    @apply transition-transform duration-200 ease-in-out;
  }
  .toggle-input:checked + .toggle-slider {
    @apply bg-accent-orange;
  }
  .toggle-input:checked + .toggle-slider::before {
    transform: translateX(1.25rem);
  }

  .toggle-label {
    @apply text-sm text-text-primary;
  }

  /* Navigation components */
  .navbar {
    @apply flex items-center justify-between px-6 py-4;
    @apply bg-bg-secondary border-b border-border-primary;
  }

  .navbar-brand {
    @apply flex items-center gap-3;
  }

  .navbar-logo {
    @apply w-8 h-8;
  }

  .navbar-title {
    @apply text-h4 text-text-primary;
  }

  .navbar-menu {
    @apply flex items-center gap-2;
  }

  .navbar-link {
    @apply px-4 py-2 text-sm font-medium text-text-secondary;
    @apply no-underline rounded-md transition-all duration-150 ease-in-out;
  }
  .navbar-link:hover {
    @apply text-text-primary bg-bg-hover;
  }
  .navbar-link.active {
    @apply text-accent-orange;
    background-color: var(--color-accent-orange-muted);
  }

  .navbar-actions {
    @apply flex items-center gap-2;
  }

  /* Sidebar navigation */
  .sidebar {
    @apply w-64 min-h-screen bg-bg-secondary border-r border-border-primary px-4 py-6;
  }

  .sidebar-nav {
    @apply flex flex-col gap-1;
  }

  .sidebar-link {
    @apply flex items-center gap-3 px-4 py-3 text-sm font-medium text-text-secondary;
    @apply no-underline rounded-lg transition-all duration-150 ease-in-out;
  }
  .sidebar-link:hover {
    @apply text-text-primary bg-bg-hover;
  }
  .sidebar-link.active {
    @apply text-text-primary border-l-[3px] border-accent-orange;
    background-color: rgba(203, 78, 27, 0.15);
  }
  .sidebar-link-disabled {
    @apply opacity-50 cursor-not-allowed;
  }
  .sidebar-link-disabled:hover {
    @apply text-text-secondary bg-transparent;
  }

  .sidebar-icon {
    @apply w-5 h-5 flex-shrink-0;
  }

  .sidebar-badge {
    @apply ml-auto px-2 py-0.5 text-xs font-semibold text-text-primary;
    @apply bg-border-primary rounded-full;
  }

  /* Breadcrumbs */
  .breadcrumb {
    @apply py-4;
  }

  .breadcrumb-list {
    @apply flex items-center gap-2 list-none m-0 p-0;
  }

  .breadcrumb-item {
    @apply text-sm;
  }

  .breadcrumb-link {
    @apply text-text-secondary no-underline transition-colors duration-150 ease-in-out;
  }
  .breadcrumb-link:hover {
    @apply text-accent-blue;
  }

  .breadcrumb-current {
    @apply text-text-primary font-medium;
  }

  .breadcrumb-separator {
    @apply text-text-tertiary text-sm;
  }

  /* Table components */
  .table-container {
    @apply w-full overflow-x-auto border border-border-primary rounded-lg;
  }

  .table {
    @apply w-full border-collapse text-sm;
  }

  .table-header {
    @apply bg-bg-secondary border-b border-border-primary;
  }

  .table-cell-header {
    @apply px-4 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider;
  }

  .table-body {
    @apply bg-bg-primary;
  }

  .table-row {
    @apply border-b border-border-primary transition-colors duration-150 ease-in-out;
  }
  .table-row:hover {
    @apply bg-bg-secondary;
  }
  .table-row:last-child {
    @apply border-b-0;
  }

  .table-cell {
    @apply px-4 py-4 text-text-primary align-middle;
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center px-3 py-1 text-xs font-semibold leading-none rounded-full whitespace-nowrap;
  }

  .badge-orange {
    @apply bg-accent-orange text-white;
  }

  .badge-blue {
    @apply bg-accent-blue text-white;
  }

  .badge-gray {
    @apply bg-border-primary text-text-primary;
  }

  .badge-success {
    @apply bg-success text-white;
  }

  .badge-warning {
    @apply bg-warning text-bg-primary;
  }

  .badge-error {
    @apply bg-error text-white;
  }

  /* Status indicators */
  .status-indicator {
    @apply inline-flex items-center gap-2 text-sm font-medium;
  }
  .status-indicator::before {
    content: "";
    @apply w-2 h-2 rounded-full;
  }

  .status-online {
    @apply text-success;
  }
  .status-online::before {
    @apply bg-success;
  }

  .status-idle {
    @apply text-warning;
  }
  .status-idle::before {
    @apply bg-warning;
  }

  .status-busy {
    @apply text-error;
  }
  .status-busy::before {
    @apply bg-error;
  }

  .status-offline {
    @apply text-text-tertiary;
  }
  .status-offline::before {
    @apply bg-text-tertiary;
  }

  /* Alert/notification banners */
  .alert {
    @apply flex items-start gap-3 p-4 rounded-lg border;
  }

  .alert-icon {
    @apply w-5 h-5 flex-shrink-0 mt-0.5;
  }

  .alert-content {
    @apply flex-1;
  }

  .alert-title {
    @apply text-sm font-semibold mb-1;
  }

  .alert-message {
    @apply text-sm;
  }

  .alert-close {
    @apply bg-transparent border-0 text-2xl leading-none cursor-pointer;
    @apply opacity-70 transition-opacity duration-150 ease-in-out;
  }
  .alert-close:hover {
    @apply opacity-100;
  }

  .alert-info {
    @apply bg-info-bg border-info-border text-info;
  }

  .alert-success {
    @apply bg-success-bg border-success-border text-success;
  }

  .alert-warning {
    @apply bg-warning-bg border-warning-border text-warning;
  }

  .alert-error {
    @apply bg-error-bg border-error-border text-error;
  }

  /* Skip link for accessibility */
  .skip-link {
    @apply absolute top-0 left-0 px-4 py-2 bg-accent-orange text-white;
    @apply transform -translate-y-full focus:translate-y-0;
    @apply transition-transform duration-200 ease-in-out;
    @apply z-[1000];
  }

  /* Sidebar mobile transform */
  .sidebar-overlay {
    @apply fixed inset-0 lg:hidden;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 299;
  }

  /* Status pulse animation */
  .status-pulse {
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  /* Bot status in sidebar footer */
  .sidebar-status {
    @apply flex items-center gap-2 px-3 py-2 text-sm;
  }

  .sidebar-status-dot {
    @apply w-2 h-2 rounded-full;
  }

  .sidebar-status-dot.online {
    @apply bg-success;
  }

  .sidebar-status-dot.offline {
    @apply bg-text-tertiary;
  }

  .sidebar-status-dot.error {
    @apply bg-error;
  }

  /* Sidebar section labels */
  .sidebar-section {
    @apply px-3 py-2 mb-2 text-xs font-semibold text-text-tertiary uppercase tracking-wider;
  }

  /* Sidebar badge dot for notifications */
  .sidebar-badge-dot {
    @apply ml-auto w-2 h-2 bg-accent-orange rounded-full;
  }

  /* Dropdown menu */
  .dropdown-menu {
    @apply hidden absolute opacity-0 -translate-y-2.5;
    @apply transition-all duration-150 ease-in-out;
  }

  .dropdown-menu.active {
    @apply block opacity-100 translate-y-0;
  }

  /* Skeleton loader base */
  .skeleton {
    background: linear-gradient(90deg, #2f3336 0%, #3f4447 50%, #2f3336 100%);
    background-size: 200% 100%;
    animation: skeleton-pulse 1.5s ease-in-out infinite;
  }

  @keyframes skeleton-pulse {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  /* Static skeleton (no animation) */
  .skeleton-static {
    background: #2f3336;
    animation: none;
  }

  /* Reduced motion preference - comprehensive support for accessibility */
  @media (prefers-reduced-motion: reduce) {
    /* Disable all animations and transitions globally */
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    /* Skeleton loader - static background */
    .skeleton {
      animation: none;
      background: #2f3336;
    }

    /* Status pulse indicator */
    .status-pulse {
      animation: none;
    }

    /* Loading overlays */
    .loading-overlay,
    .loading-container-overlay {
      transition: none;
    }

    /* Toast notifications */
    .toast {
      animation: none;
    }

    .toast.dismissing {
      animation: none;
    }

    .toast-progress.animating {
      animation: none;
    }

    /* Interactive elements */
    .dropdown-menu {
      transition: none;
    }

    .sidebar-link,
    .navbar-link,
    .btn,
    .form-input,
    .form-select,
    .card-interactive {
      transition: none;
    }

    /* Spinner animations */
    .animate-spin {
      animation: none;
    }
  }

  /* Page loading overlay */
  .loading-overlay {
    @apply fixed inset-0 z-[1100] flex flex-col items-center justify-center gap-4;
    background-color: rgba(29, 32, 34, 0.8);
    opacity: 0;
    visibility: hidden;
    transition: opacity 200ms ease, visibility 200ms ease;
  }

  .loading-overlay.active {
    opacity: 1;
    visibility: visible;
  }

  /* Container-scoped overlay */
  .loading-container {
    @apply relative;
  }

  .loading-container-overlay {
    @apply absolute inset-0 z-10 flex flex-col items-center justify-center gap-3 rounded-lg;
    background-color: rgba(29, 32, 34, 0.8);
    opacity: 0;
    visibility: hidden;
    transition: opacity 200ms ease, visibility 200ms ease;
  }

  .loading-container-overlay.active {
    opacity: 1;
    visibility: visible;
  }

  /* Connection Status Indicator */
  #connection-status[data-state="connected"] {
    @apply text-success;
    background-color: rgba(16, 185, 129, 0.1);
  }
  #connection-status[data-state="connected"] .connection-dot {
    @apply bg-success;
  }
  #connection-status[data-state="connected"] .connection-dot::before {
    content: "";
    @apply absolute inset-0 rounded-full bg-success;
    animation: connection-pulse 2s ease-in-out infinite;
  }

  #connection-status[data-state="connecting"],
  #connection-status[data-state="reconnecting"] {
    @apply text-warning;
    background-color: rgba(245, 158, 11, 0.1);
  }
  #connection-status[data-state="connecting"] .connection-dot,
  #connection-status[data-state="reconnecting"] .connection-dot {
    @apply bg-warning;
    animation: connection-blink 1s ease-in-out infinite;
  }

  #connection-status[data-state="disconnected"] {
    @apply text-error;
    background-color: rgba(239, 68, 68, 0.1);
  }
  #connection-status[data-state="disconnected"] .connection-dot {
    @apply bg-error;
  }

  /* Legacy class-based selectors for backwards compatibility */
  .connection-status[data-state="connected"] .connection-dot {
    @apply bg-success;
  }
  .connection-status[data-state="connected"] .connection-dot::before {
    content: "";
    @apply absolute inset-0 rounded-full bg-success;
    animation: connection-pulse 2s ease-in-out infinite;
  }
  .connection-status[data-state="connected"] .connection-text {
    @apply text-success;
  }

  .connection-status[data-state="connecting"] .connection-dot,
  .connection-status[data-state="reconnecting"] .connection-dot {
    @apply bg-warning;
    animation: connection-blink 1s ease-in-out infinite;
  }
  .connection-status[data-state="connecting"] .connection-text,
  .connection-status[data-state="reconnecting"] .connection-text {
    @apply text-warning;
  }

  .connection-status[data-state="disconnected"] .connection-dot {
    @apply bg-error;
  }
  .connection-status[data-state="disconnected"] .connection-text {
    @apply text-error;
  }

  @keyframes connection-pulse {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(2); opacity: 0; }
  }

  @keyframes connection-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
  }

  /* Card update pulse effect */
  .card-update-pulse {
    animation: update-pulse 0.6s ease-out;
  }

  @keyframes update-pulse {
    0% { box-shadow: 0 0 0 0 rgba(9, 142, 207, 0.4); }
    70% { box-shadow: 0 0 0 10px rgba(9, 142, 207, 0); }
    100% { box-shadow: 0 0 0 0 rgba(9, 142, 207, 0); }
  }

  /* Activity item entrance animation */
  .activity-item-enter {
    animation: slide-in-from-top 0.3s ease-out;
  }

  @keyframes slide-in-from-top {
    0% { opacity: 0; transform: translateY(-10px); }
    100% { opacity: 1; transform: translateY(0); }
  }

  /* Activity feed toggle button */
  .btn-toggle {
    @apply inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium;
    @apply text-text-secondary bg-bg-tertiary border border-border-primary rounded-md;
    @apply transition-all duration-150 ease-in-out cursor-pointer;
  }
  .btn-toggle:hover {
    @apply bg-bg-hover text-text-primary;
  }
  .btn-toggle.active {
    @apply bg-accent-orange border-accent-orange text-white;
  }

  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    #connection-status[data-state="connected"] .connection-dot::before,
    #connection-status[data-state="connecting"] .connection-dot,
    #connection-status[data-state="reconnecting"] .connection-dot,
    .connection-status[data-state="connected"] .connection-dot::before,
    .connection-status[data-state="connecting"] .connection-dot,
    .connection-status[data-state="reconnecting"] .connection-dot,
    .card-update-pulse,
    .activity-item-enter {
      animation: none;
    }
  }

  /* Bot Status Banner - Dashboard Redesign */
  .bot-status-banner {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%);
    border: 1px solid rgba(16, 185, 129, 0.2);
    border-radius: 0.75rem;
    padding: 1rem 1.5rem;
  }

  .bot-status-banner.offline {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%);
    border-color: rgba(239, 68, 68, 0.2);
  }

  /* Activity Feed Timeline - Dashboard Redesign */
  .activity-timeline {
    position: relative;
  }

  .activity-timeline::before {
    content: '';
    position: absolute;
    left: 1.25rem;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: var(--color-border-secondary);
  }

  .activity-item {
    position: relative;
    padding-left: 3rem;
    padding-bottom: 1rem;
  }

  .activity-item:last-child {
    padding-bottom: 0;
  }

  .activity-item::before {
    content: '';
    position: absolute;
    left: 0.875rem;
    top: 0.375rem;
    width: 0.75rem;
    height: 0.75rem;
    background-color: var(--color-bg-secondary);
    border: 2px solid var(--color-border-primary);
    border-radius: 50%;
    z-index: 1;
  }

  .activity-item.success::before {
    border-color: var(--color-success);
    background-color: var(--color-success);
  }

  .activity-item.info::before {
    border-color: var(--color-accent-blue);
    background-color: var(--color-accent-blue);
  }

  .activity-item.warning::before {
    border-color: var(--color-warning);
    background-color: var(--color-warning);
  }

  .activity-item.error::before {
    border-color: var(--color-error);
    background-color: var(--color-error);
  }

  /* Dashboard Redesign - Enhanced Navbar */
  .navbar-redesign {
    height: var(--navbar-height);
    background-color: var(--color-bg-secondary);
    border-bottom: 1px solid var(--color-border-primary);
    backdrop-filter: blur(8px);
  }

  /* Dashboard Redesign - Enhanced Sidebar */
  .sidebar-redesign {
    width: var(--sidebar-width);
    background-color: var(--color-bg-secondary);
    border-right: 1px solid var(--color-border-primary);
    transition: width 0.2s ease-out, transform 0.2s ease-out;
  }

  /* Custom Scrollbar for Sidebar - Issue #801 */
  /* Webkit browsers (Chrome, Safari, Edge) */
  #sidebar::-webkit-scrollbar {
    width: 6px;
  }

  #sidebar::-webkit-scrollbar-track {
    background: transparent;
  }

  #sidebar::-webkit-scrollbar-thumb {
    background: var(--color-bg-hover);
    border-radius: 3px;
  }

  #sidebar::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-tertiary);
  }

  /* Firefox scrollbar support */
  #sidebar {
    scrollbar-width: thin;
    scrollbar-color: var(--color-bg-hover) transparent;
  }

  .sidebar-redesign.collapsed {
    width: var(--sidebar-collapsed-width);
  }

  /* Dashboard Redesign - Sidebar Link Redesign */
  .sidebar-link-redesign {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-text-secondary);
    text-decoration: none;
    border-radius: 0.5rem;
    transition: all 0.15s ease-in-out;
    position: relative;
  }

  .sidebar-link-redesign:hover {
    color: var(--color-text-primary);
    background-color: var(--color-bg-hover);
  }

  .sidebar-link-redesign.active {
    color: var(--color-text-primary);
    background-color: rgba(203, 78, 27, 0.12);
  }

  .sidebar-link-redesign.active::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 24px;
    background-color: var(--color-accent-orange);
    border-radius: 0 2px 2px 0;
  }

  /* Dashboard Redesign - Sidebar Section Header */
  .sidebar-section-header {
    padding: 0.5rem 1rem;
    font-size: 0.6875rem;
    font-weight: 600;
    color: var(--color-text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  /* Dashboard Redesign - Sidebar Badge */
  .sidebar-badge-redesign {
    margin-left: auto;
    padding: 0.125rem 0.5rem;
    font-size: 0.6875rem;
    font-weight: 600;
    color: var(--color-text-primary);
    background-color: var(--color-border-primary);
    border-radius: 9999px;
    min-width: 1.25rem;
    text-align: center;
  }

  /* Dashboard Redesign - Main Content Area */
  .main-content-redesign {
    margin-left: var(--sidebar-width);
    margin-top: var(--navbar-height);
    min-height: calc(100vh - var(--navbar-height));
    background-color: var(--color-bg-primary);
    transition: margin-left 0.2s ease-out;
  }

  .sidebar-redesign.collapsed ~ .main-content-redesign {
    margin-left: var(--sidebar-collapsed-width);
  }

  @media (max-width: 1023px) {
    .main-content-redesign {
      margin-left: 0 !important;
    }
  }

  /* Dashboard Redesign - Mobile Overlay */
  .mobile-overlay {
    position: fixed;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(2px);
    z-index: 299;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease-out;
  }

  .mobile-overlay.active {
    opacity: 1;
    visibility: visible;
  }

  /* Dashboard Redesign - Collapsed Sidebar Text Hiding */
  .sidebar-redesign.collapsed .sidebar-link-text,
  .sidebar-redesign.collapsed .sidebar-badge-redesign,
  .sidebar-redesign.collapsed .sidebar-section-header,
  .sidebar-redesign.collapsed .bot-status-text {
    display: none;
  }

  .sidebar-redesign.collapsed .sidebar-link-redesign {
    justify-content: center;
    padding: 0.75rem;
  }

  .sidebar-redesign.collapsed .sidebar-logo-text {
    display: none;
  }

  .sidebar-redesign.collapsed .bot-status-footer {
    padding-top: 0.75rem;
    margin-top: 0.75rem;
  }

  .sidebar-redesign.collapsed .bot-status-container {
    padding: 0.75rem;
    background: transparent;
  }

  .sidebar-redesign.collapsed .bot-status-content {
    justify-content: center;
    gap: 0;
  }

  /* Dashboard Redesign - Early Collapsed State (via html class for FOUC prevention) */
  /* These rules apply when the sidebar should be collapsed BEFORE JavaScript runs */
  @media (min-width: 1024px) {
    html.sidebar-collapsed .sidebar-redesign {
      width: var(--sidebar-collapsed-width);
    }

    html.sidebar-collapsed .main-content-redesign {
      margin-left: var(--sidebar-collapsed-width);
    }

    html.sidebar-collapsed .sidebar-link-text,
    html.sidebar-collapsed .sidebar-badge-redesign,
    html.sidebar-collapsed .sidebar-section-header,
    html.sidebar-collapsed .bot-status-text,
    html.sidebar-collapsed .sidebar-logo-text {
      display: none;
    }

    html.sidebar-collapsed .sidebar-link-redesign {
      justify-content: center;
      padding: 0.75rem;
    }

    html.sidebar-collapsed .bot-status-footer {
      padding-top: 0.75rem;
      margin-top: 0.75rem;
    }

    html.sidebar-collapsed .bot-status-container {
      padding: 0.75rem;
      background: transparent;
    }

    html.sidebar-collapsed .bot-status-content {
      justify-content: center;
      gap: 0;
    }
  }

  /* Dashboard Redesign - Bot Status Indicator */
  .bot-status-indicator {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 600;
  }

  .bot-status-indicator.online {
    background-color: rgba(16, 185, 129, 0.15);
    color: var(--color-success);
  }

  .bot-status-indicator.offline {
    background-color: rgba(239, 68, 68, 0.15);
    color: var(--color-error);
  }

  .bot-status-indicator.connecting {
    background-color: rgba(245, 158, 11, 0.15);
    color: var(--color-warning);
  }

  .status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: currentColor;
  }

  .status-dot.pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* Dashboard Redesign - Notification Dot */
  .notification-dot {
    position: absolute;
    top: -2px;
    right: -2px;
    width: 8px;
    height: 8px;
    background-color: var(--color-accent-orange);
    border-radius: 50%;
    border: 2px solid var(--color-bg-secondary);
  }

  /* Dashboard Redesign - Notification Badge (with count) */
  .notification-badge {
    position: absolute;
    top: 0;
    right: 0;
    min-width: 1.125rem;
    height: 1.125rem;
    padding: 0 0.25rem;
    background-color: var(--color-accent-orange);
    color: #ffffff;
    font-size: 0.625rem;
    font-weight: 700;
    line-height: 1.125rem;
    text-align: center;
    border-radius: 0.5625rem;
    border: 2px solid var(--color-bg-secondary);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }

  .notification-badge.hidden {
    display: none;
  }

  .notification-badge.pulse-once {
    animation: badge-pulse 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  @keyframes badge-pulse {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.2);
    }
  }

  /* Dashboard Redesign - Notification Dropdown */
  .notification-dropdown {
    position: absolute;
    right: 0;
    top: calc(100% + 0.5rem);
    width: 360px;
    background-color: var(--color-bg-tertiary);
    border: 1px solid var(--color-border-primary);
    border-radius: 0.5rem;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-8px);
    transition: all 0.15s ease-out;
    z-index: 350;
    display: flex;
    flex-direction: column;
    max-height: 480px;
  }

  .notification-dropdown.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  /* Notification Dropdown Header */
  .notification-dropdown-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem;
    border-bottom: 1px solid var(--color-border-primary);
    flex-shrink: 0;
  }

  .notification-mark-all-read {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.375rem 0.625rem;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--color-text-secondary);
    background-color: transparent;
    border: none;
    border-radius: 0.375rem;
    cursor: pointer;
    transition: all 0.15s ease-out;
  }

  .notification-mark-all-read:hover {
    color: var(--color-accent-blue);
    background-color: var(--color-bg-hover);
  }

  .notification-mark-all-read:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Notification List (scrollable area) */
  .notification-list {
    flex: 1;
    padding: 0.5rem;
    overflow-y: auto;
    overflow-x: hidden;
    scrollbar-width: thin;
    scrollbar-color: var(--color-border-primary) transparent;
  }

  .notification-list::-webkit-scrollbar {
    width: 6px;
  }

  .notification-list::-webkit-scrollbar-track {
    background: transparent;
  }

  .notification-list::-webkit-scrollbar-thumb {
    background-color: var(--color-border-primary);
    border-radius: 3px;
  }

  .notification-list::-webkit-scrollbar-thumb:hover {
    background-color: var(--color-accent-blue);
  }

  /* Notification Dropdown Footer */
  .notification-dropdown-footer {
    padding: 0.75rem 1rem;
    border-top: 1px solid var(--color-border-primary);
    background-color: var(--color-bg-secondary);
    flex-shrink: 0;
    border-radius: 0 0 0.5rem 0.5rem;
  }

  .notification-view-all {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    width: 100%;
    justify-content: center;
    padding: 0.5rem;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-accent-blue);
    text-decoration: none;
    border-radius: 0.375rem;
    transition: all 0.15s ease-out;
  }

  .notification-view-all:hover {
    background-color: var(--color-bg-hover);
    color: var(--color-accent-blue-hover);
  }

  /* Notification Item */
  .notification-item {
    position: relative;
    display: grid;
    grid-template-columns: 1.75rem 1fr auto;
    align-items: start;
    gap: 0.625rem;
    padding: 0.75rem;
    border-bottom: 1px solid var(--color-border-secondary);
    border-radius: 0.375rem;
    margin-bottom: 0.25rem;
    transition: background-color 0.15s ease-out;
    cursor: pointer;
  }

  .notification-item:last-child {
    border-bottom: none;
    margin-bottom: 0;
  }

  .notification-item:hover {
    background-color: var(--color-bg-hover);
  }

  .notification-item:focus {
    outline: 2px solid var(--color-border-focus);
    outline-offset: -2px;
    background-color: var(--color-bg-hover);
  }

  /* Unread state - blue accent background */
  .notification-item[data-read="false"] {
    background-color: rgba(9, 142, 207, 0.08);
  }

  .notification-item[data-read="false"]:hover {
    background-color: rgba(9, 142, 207, 0.12);
  }

  .notification-item[data-read="false"] .notification-title {
    font-weight: 600;
    color: var(--color-text-primary);
  }

  /* Unread indicator dot */
  .notification-item[data-read="false"]::before {
    content: '';
    position: absolute;
    left: 0.375rem;
    top: 50%;
    transform: translateY(-50%);
    width: 6px;
    height: 6px;
    background-color: var(--color-accent-blue);
    border-radius: 50%;
  }

  /* Notification Icon Container */
  .notification-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 1.75rem;
    height: 1.75rem;
    border-radius: 0.375rem;
    flex-shrink: 0;
  }

  .notification-icon svg {
    width: 1rem !important;
    height: 1rem !important;
  }

  /* Icon variants by type */
  .notification-icon-critical {
    background-color: rgba(239, 68, 68, 0.15);
    color: var(--color-error);
  }

  .notification-icon-warning {
    background-color: rgba(245, 158, 11, 0.15);
    color: var(--color-warning);
  }

  .notification-icon-info {
    background-color: rgba(6, 182, 212, 0.15);
    color: var(--color-info);
  }

  .notification-icon-success {
    background-color: rgba(16, 185, 129, 0.15);
    color: var(--color-success);
  }

  .notification-icon-guild {
    background-color: rgba(203, 78, 27, 0.15);
    color: var(--color-accent-orange);
  }

  .notification-icon-command {
    background-color: rgba(9, 142, 207, 0.15);
    color: var(--color-accent-blue);
  }

  /* Notification Content */
  .notification-content {
    display: flex;
    flex-direction: column;
    gap: 0.125rem;
    min-width: 0;
  }

  .notification-title {
    margin: 0;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--color-text-primary);
    line-height: 1.3;
  }

  .notification-message {
    margin: 0;
    font-size: 0.6875rem;
    color: var(--color-text-secondary);
    line-height: 1.35;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
  }

  .notification-meta {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    margin-top: 0.25rem;
  }

  .notification-timestamp {
    font-size: 0.625rem;
    color: var(--color-text-tertiary);
  }

  .notification-type-badge {
    font-size: 0.5625rem;
    font-weight: 600;
    color: var(--color-text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.025em;
    padding: 0.0625rem 0.3125rem;
    background-color: var(--color-bg-primary);
    border-radius: 0.1875rem;
  }

  /* Notification Actions */
  .notification-actions {
    display: flex;
    align-items: flex-start;
    gap: 0.125rem;
    opacity: 0.5;
    transition: opacity 0.15s ease-out;
    position: relative;
    z-index: 2;
  }

  .notification-item:hover .notification-actions,
  .notification-item:focus .notification-actions {
    opacity: 1;
  }

  .notification-action-btn {
    padding: 0.25rem;
    background-color: transparent;
    border: none;
    border-radius: 0.25rem;
    color: var(--color-text-tertiary);
    cursor: pointer;
    transition: all 0.15s ease-out;
  }

  .notification-action-btn svg {
    width: 0.875rem !important;
    height: 0.875rem !important;
  }

  .notification-action-btn:hover {
    background-color: var(--color-bg-secondary);
    color: var(--color-text-primary);
  }

  /* Toggle read/unread icons */
  .notification-read-icon {
    display: none;
  }

  .notification-item[data-read="false"] .notification-read-icon {
    display: none;
  }

  .notification-item[data-read="false"] .notification-unread-icon {
    display: block;
  }

  .notification-item[data-read="true"] .notification-read-icon {
    display: block;
  }

  .notification-item[data-read="true"] .notification-unread-icon {
    display: none;
  }

  /* Overlay link for entire item click */
  .notification-overlay-link {
    position: absolute;
    inset: 0;
    z-index: 1;
  }

  /* Notification Empty State */
  .notification-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    padding: 4rem 2rem;
    text-align: center;
  }

  .notification-empty-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-text-secondary);
    margin: 0;
  }

  .notification-empty-message {
    font-size: 0.8125rem;
    color: var(--color-text-tertiary);
    margin: 0;
  }

  /* Notification item entrance animation (for real-time updates) */
  .notification-item-enter {
    animation: slide-in-from-top 0.3s ease-out;
  }

  @keyframes slide-in-from-top {
    0% {
      opacity: 0;
      transform: translateY(-10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Notification Loading State */
  .notification-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    color: var(--color-text-tertiary);
  }

  /* Mobile responsive - full screen modal */
  @media (max-width: 767px) {
    .notification-dropdown {
      position: fixed;
      inset: 0;
      width: 100%;
      max-height: none;
      height: 100%;
      border-radius: 0;
      transform: translateX(100%);
      z-index: 400;
    }

    .notification-dropdown.active {
      transform: translateX(0);
    }

    .notification-dropdown-header {
      padding: 1rem 1rem;
      border-bottom: 1px solid var(--color-border-primary);
      background-color: var(--color-bg-secondary);
    }

    .notification-dropdown-footer {
      border-radius: 0;
    }
  }

  /* Dashboard Redesign - User Menu Dropdown */
  .user-menu-dropdown {
    position: absolute;
    right: 0;
    top: calc(100% + 0.5rem);
    width: 240px;
    background-color: var(--color-bg-tertiary);
    border: 1px solid var(--color-border-primary);
    border-radius: 0.5rem;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-8px);
    transition: all 0.15s ease-out;
    z-index: 350;
  }

  .user-menu-dropdown.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  /* Dashboard Redesign - Server Action Dropdown */
  .server-action-dropdown {
    position: absolute;
    right: 0;
    top: calc(100% + 0.25rem);
    width: 180px;
    background-color: var(--color-bg-tertiary);
    border: 1px solid var(--color-border-primary);
    border-radius: 0.5rem;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-8px);
    transition: all 0.15s ease-out;
    z-index: 350;
    overflow: hidden;
  }

  .server-action-dropdown.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  /* Respect reduced motion for redesign elements */
  @media (prefers-reduced-motion: reduce) {
    .sidebar-redesign,
    .main-content-redesign,
    .mobile-overlay,
    .sidebar-link-redesign,
    .bot-status-indicator,
    .status-dot.pulse,
    .user-menu-dropdown,
    .server-action-dropdown,
    .notification-dropdown,
    .notification-badge,
    .notification-item,
    .notification-item-enter {
      transition: none;
      animation: none;
    }

    .notification-dropdown.active {
      transform: none;
    }
  }
}

/* Utility classes */
@layer utilities {
  .avatar {
    @apply w-10 h-10 rounded-full object-cover;
  }

  /* Z-index utilities */
  .z-fixed {
    z-index: 300;
  }

  .z-notification {
    z-index: var(--z-notification);
  }

  /* Toast Notifications */
  .toast {
    pointer-events: auto;
    min-width: 300px;
    max-width: 420px;
    padding: 1rem;
    border-radius: 0.5rem;
    border: 1px solid;
    background-color: var(--color-bg-tertiary);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    animation: slideInRight 200ms ease-in-out forwards;
  }

  /* Toast Slide-in Animations */
  @keyframes slideInRight {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes slideOutRight {
    from {
      transform: translateX(0);
      opacity: 1;
    }
    to {
      transform: translateX(100%);
      opacity: 0;
    }
  }

  .toast.dismissing {
    animation: slideOutRight 200ms ease-in-out forwards;
  }

  /* Toast Variants */
  .toast-info {
    background-color: rgba(6, 182, 212, 0.1);
    border-color: rgba(6, 182, 212, 0.3);
  }

  .toast-info .toast-icon {
    color: #06b6d4;
  }

  .toast-success {
    background-color: rgba(16, 185, 129, 0.1);
    border-color: rgba(16, 185, 129, 0.3);
  }

  .toast-success .toast-icon {
    color: #10b981;
  }

  .toast-warning {
    background-color: rgba(245, 158, 11, 0.1);
    border-color: rgba(245, 158, 11, 0.3);
  }

  .toast-warning .toast-icon {
    color: #f59e0b;
  }

  .toast-error {
    background-color: rgba(239, 68, 68, 0.1);
    border-color: rgba(239, 68, 68, 0.3);
  }

  .toast-error .toast-icon {
    color: #ef4444;
  }

  /* Toast Progress Bar */
  .toast-progress {
    position: absolute;
    bottom: 0;
    left: 0;
    height: 3px;
    width: 100%;
    transform-origin: left;
  }

  .toast-info .toast-progress {
    background-color: #06b6d4;
  }

  .toast-success .toast-progress {
    background-color: #10b981;
  }

  .toast-warning .toast-progress {
    background-color: #f59e0b;
  }

  .toast-error .toast-progress {
    background-color: #ef4444;
  }

  @keyframes progressShrink {
    from {
      transform: scaleX(1);
    }
    to {
      transform: scaleX(0);
    }
  }

  .toast-progress.animating {
    animation: progressShrink linear forwards;
  }

  .toast-progress.paused {
    animation-play-state: paused;
  }

  /* Toast Close Button */
  .toast-close {
    flex-shrink: 0;
    padding: 0.25rem;
    border-radius: 0.25rem;
    color: #a8a5a3;
    transition: color 0.15s ease, background-color 0.15s ease;
    cursor: pointer;
    background: none;
    border: none;
  }

  .toast-close:hover {
    color: #d7d3d0;
    background-color: rgba(255, 255, 255, 0.1);
  }

  /* Toast Action Button */
  .toast-action {
    flex-shrink: 0;
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
    font-weight: 600;
    text-decoration: underline;
    border: none;
    background: none;
    cursor: pointer;
    border-radius: 0.25rem;
    transition: opacity 0.15s ease, text-decoration 0.15s ease;
    opacity: 0.9;
  }

  .toast-action:hover {
    opacity: 1;
    text-decoration: none;
  }

  .toast-action:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
  }

  .toast-action:focus-visible {
    outline: 2px solid var(--color-primary-500, #3b82f6);
    outline-offset: 1px;
  }

  /* Toast Action Button Type-Specific Colors */
  .toast-info .toast-action {
    color: #06b6d4;
  }

  .toast-success .toast-action {
    color: #10b981;
  }

  .toast-warning .toast-action {
    color: #f59e0b;
  }

  .toast-error .toast-action {
    color: #ef4444;
  }

  /* Animate-spin utility if not already present */
  .animate-spin {
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  /* Quick Actions Panel - Dashboard Redesign */
  .quick-action-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.75rem;
    padding: 1.25rem;
    background-color: var(--color-bg-primary);
    border: 1px solid var(--color-border-primary);
    border-radius: 0.75rem;
    transition: all 0.2s ease-out;
    cursor: pointer;
  }

  .quick-action-card:hover {
    background-color: var(--color-bg-hover);
    border-color: var(--color-border-focus);
    transform: translateY(-2px);
  }

  .quick-action-card:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .quick-action-card:disabled:hover {
    background-color: var(--color-bg-primary);
    border-color: var(--color-border-primary);
    transform: translateY(0);
  }

  .quick-action-icon {
    width: 3rem;
    height: 3rem;
    border-radius: 0.75rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease-out;
  }

  .quick-action-card:hover .quick-action-icon {
    transform: scale(1.1);
  }

  .quick-action-card:disabled:hover .quick-action-icon {
    transform: scale(1);
  }

  /* ============================================
     LOGIN PAGE STYLES
     Migrated from login.css for design token compliance
     ============================================ */

  /* Login page animated gradient overlay */
  .login-gradient-overlay {
    background: radial-gradient(
      circle at 30% 20%,
      rgba(203, 78, 27, 0.15) 0%,
      transparent 50%
    ),
    radial-gradient(
      circle at 70% 80%,
      rgba(9, 142, 207, 0.12) 0%,
      transparent 50%
    );
    animation: login-gradient-shift 8s ease-in-out infinite alternate;
  }

  @keyframes login-gradient-shift {
    0% {
      transform: translate(0, 0) scale(1);
      opacity: 0.8;
    }
    100% {
      transform: translate(20px, -20px) scale(1.1);
      opacity: 1;
    }
  }

  /* Login page floating particles */
  .login-particles .particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: radial-gradient(circle, #cb4e1b 0%, transparent 70%);
    border-radius: 50%;
    opacity: 0.3;
    animation: login-float-particle 15s infinite ease-in-out;
  }

  .login-particles .particle:nth-child(1) { left: 10%; animation-delay: 0s; }
  .login-particles .particle:nth-child(2) { left: 30%; animation-delay: 2s; }
  .login-particles .particle:nth-child(3) { left: 50%; animation-delay: 4s; }
  .login-particles .particle:nth-child(4) { left: 70%; animation-delay: 6s; }
  .login-particles .particle:nth-child(5) { left: 90%; animation-delay: 8s; }

  @keyframes login-float-particle {
    0%, 100% {
      transform: translateY(100vh) scale(0.5);
      opacity: 0;
    }
    10% {
      opacity: 0.3;
    }
    50% {
      transform: translateY(-10vh) scale(1);
      opacity: 0.5;
    }
    90% {
      opacity: 0.3;
    }
  }

  /* Login page logo pulse animation */
  .login-logo-container {
    animation: login-logo-pulse 3s ease-in-out infinite;
  }

  @keyframes login-logo-pulse {
    0%, 100% {
      transform: scale(1);
      box-shadow:
        0 10px 40px rgba(203, 78, 27, 0.3),
        0 0 60px rgba(203, 78, 27, 0.15);
    }
    50% {
      transform: scale(1.05);
      box-shadow:
        0 15px 50px rgba(203, 78, 27, 0.4),
        0 0 80px rgba(203, 78, 27, 0.2);
    }
  }

  /* Login form staggered entrance animation */
  .login-form-animated > * {
    opacity: 0;
    transform: translateY(12px);
    animation: login-fade-in-up 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  .login-form-animated > *:nth-child(1) { animation-delay: 0.1s; }
  .login-form-animated > *:nth-child(2) { animation-delay: 0.15s; }
  .login-form-animated > *:nth-child(3) { animation-delay: 0.2s; }
  .login-form-animated > *:nth-child(4) { animation-delay: 0.25s; }
  .login-form-animated > *:nth-child(5) { animation-delay: 0.3s; }
  .login-form-animated > *:nth-child(6) { animation-delay: 0.35s; }

  @keyframes login-fade-in-up {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Login divider with gradient line */
  .login-divider::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(
      to right,
      transparent 0%,
      #3f4447 20%,
      #3f4447 80%,
      transparent 100%
    );
  }

  /* Login error alert animation */
  .login-error-alert {
    animation: login-slide-down 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  @keyframes login-slide-down {
    from {
      opacity: 0;
      transform: translateY(-8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .login-error-alert.shake {
    animation: login-shake 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  @keyframes login-shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
    20%, 40%, 60%, 80% { transform: translateX(4px); }
  }

  /* Discord OAuth button effects */
  .btn-discord-oauth:hover {
    box-shadow: 0 6px 16px rgba(88, 101, 242, 0.4);
    transform: translateY(-2px);
  }

  .btn-discord-oauth:active {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(88, 101, 242, 0.4);
  }

  .btn-discord-oauth:focus-visible {
    outline: none;
    box-shadow: 0 4px 12px rgba(88, 101, 242, 0.3), 0 0 0 3px rgba(9, 142, 207, 0.4);
  }

  .btn-discord-oauth:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  /* Discord button shimmer effect */
  .btn-discord-oauth::before {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.15) 50%,
      transparent 100%
    );
    transform: translateX(-100%);
    transition: transform 0.6s ease;
  }

  .btn-discord-oauth:hover::before {
    transform: translateX(100%);
  }

  .btn-discord-oauth:hover svg {
    transform: scale(1.1);
  }

  /* Discord button loading state */
  .btn-discord-oauth.loading {
    pointer-events: none;
  }

  .btn-discord-oauth.loading svg {
    animation: spin 1s linear infinite;
  }

  /* Floating Label Pattern - Form inputs with floating labels */
  .form-input-floating:focus + .form-label-floating,
  .form-input-floating:not(:placeholder-shown) + .form-label-floating {
    transform: translateY(-0.625rem) scale(0.85);
    color: var(--color-accent-blue);
    font-weight: 600;
  }

  /* Floating label error state */
  .form-input-floating.error {
    border-color: var(--color-error);
    background-color: rgba(239, 68, 68, 0.05);
  }

  .form-input-floating.error:focus {
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1), 0 0 0 3px rgba(239, 68, 68, 0.15);
  }

  .form-input-floating.error + .form-label-floating {
    color: var(--color-error);
  }

  .form-input-floating.error ~ .form-error {
    opacity: 1;
    transform: translateY(0);
  }

  /* Floating label success state */
  .form-input-floating.success {
    border-color: var(--color-success);
  }

  .form-input-floating.success:focus {
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1), 0 0 0 3px rgba(16, 185, 129, 0.15);
  }

  /* Password toggle icon visibility */
  .password-toggle-icon.hidden {
    display: none;
  }

  /* Remember me checkbox states */
  .remember-me-checkbox:hover + .remember-me-checkbox-custom {
    border-color: var(--color-accent-blue);
  }

  .remember-me-checkbox:focus-visible + .remember-me-checkbox-custom {
    outline: 2px solid var(--color-accent-blue);
    outline-offset: 2px;
  }

  .remember-me-checkbox:checked + .remember-me-checkbox-custom {
    background-color: var(--color-accent-orange);
    border-color: var(--color-accent-orange);
  }

  .remember-me-checkbox:checked + .remember-me-checkbox-custom .remember-me-checkmark {
    opacity: 1;
    transform: scale(1);
  }

  /* Submit button effects */
  .btn-submit-login:hover {
    background: linear-gradient(135deg, #e5591f 0%, #cb4e1b 100%);
    box-shadow: 0 4px 12px rgba(203, 78, 27, 0.4);
    transform: translateY(-1px);
  }

  .btn-submit-login:active {
    transform: translateY(0);
    box-shadow: 0 1px 4px rgba(203, 78, 27, 0.3);
  }

  .btn-submit-login:focus-visible {
    outline: none;
    box-shadow: 0 2px 8px rgba(203, 78, 27, 0.3), 0 0 0 3px rgba(9, 142, 207, 0.4);
  }

  .btn-submit-login:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
  }

  /* Submit button loading state */
  .btn-submit-login.loading {
    pointer-events: none;
  }

  .btn-submit-login.loading .btn-text {
    visibility: hidden;
  }

  .btn-submit-login.loading::after {
    content: "";
    position: absolute;
    width: 1rem;
    height: 1rem;
    border: 2px solid #ffffff;
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 0.6s linear infinite;
  }

  /* Login page responsive styles */
  @media (max-width: 767px) {
    .login-brand-panel {
      display: none;
    }

    .login-particles {
      display: none;
    }
  }

  /* Login page reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .login-gradient-overlay,
    .login-particles .particle,
    .login-logo-container,
    .login-form-animated > *,
    .login-error-alert,
    .btn-discord-oauth,
    .btn-discord-oauth::before,
    .btn-submit-login {
      animation: none;
      transition: none;
    }

    .login-form-animated > * {
      opacity: 1;
      transform: none;
    }

    /* Keep essential loading animations */
    .btn-submit-login.loading::after,
    .btn-discord-oauth.loading svg {
      animation: spin 1s linear infinite;
    }
  }

  /* Mac-specific styling for keyboard shortcuts */
  .mac .mac\:inline { display: inline; }
  .mac .mac\:hidden { display: none; }
  html:not(.mac) .mac\:inline { display: none; }
  html:not(.mac) .mac\:hidden { display: inline; }

  /* Search keyboard shortcut hint */
  .search-kbd {
    @apply px-1.5 py-0.5 text-xs font-medium text-text-tertiary bg-bg-tertiary border border-border-primary rounded;
  }
}

/* ============================================
   SEARCH FEATURE STYLES
   Outside @layer to prevent Tailwind purging
   (classes created dynamically by JavaScript)
   ============================================ */

/* Search result highlighting */
.search-highlight {
    background-color: rgba(251, 191, 36, 0.3);  /* accent-orange with transparency */
    color: inherit;
    padding: 0 2px;
    border-radius: 2px;
  }

  /* Dark mode adjustment if needed */
  @media (prefers-color-scheme: dark) {
    .search-highlight {
      background-color: rgba(251, 191, 36, 0.25);
    }
  }

  /* Recent searches dropdown */
  .recent-searches-dropdown {
    position: absolute;
    top: calc(100% + 0.5rem);
    left: 0;
    right: 0;
    background-color: var(--color-bg-tertiary);
    border: 1px solid var(--color-border-primary);
    border-radius: 0.5rem;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-8px);
    transition: all 0.15s ease-out;
    z-index: var(--z-popover);
    max-height: 300px;
    overflow-y: auto;
  }

  .recent-searches-dropdown.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  .recent-searches-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--color-border-primary);
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--color-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .recent-searches-clear {
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--color-text-tertiary);
    background: none;
    border: none;
    border-radius: 0.25rem;
    cursor: pointer;
    transition: all 0.15s ease-out;
  }

  .recent-searches-clear:hover {
    color: var(--color-accent-orange);
    background-color: var(--color-bg-hover);
  }

  .recent-searches-list {
    list-style: none;
    margin: 0;
    padding: 0.5rem;
  }

  .recent-search-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0;
    margin-bottom: 0.25rem;
  }

  .recent-search-item:last-child {
    margin-bottom: 0;
  }

  .recent-search-link {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.625rem 0.75rem;
    color: var(--color-text-primary);
    text-decoration: none;
    border-radius: 0.375rem;
    transition: all 0.15s ease-out;
  }

  .recent-search-link:hover {
    background-color: var(--color-bg-hover);
    color: var(--color-accent-blue);
  }

  .recent-search-icon {
    width: 1rem;
    height: 1rem;
    flex-shrink: 0;
    color: var(--color-text-tertiary);
  }

  .recent-search-link:hover .recent-search-icon {
    color: var(--color-accent-blue);
  }

  .recent-search-term {
    font-size: 0.875rem;
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .recent-search-remove {
    padding: 0.375rem;
    background: none;
    border: none;
    border-radius: 0.25rem;
    color: var(--color-text-tertiary);
    cursor: pointer;
    transition: all 0.15s ease-out;
    flex-shrink: 0;
  }

  .recent-search-remove:hover {
    background-color: var(--color-bg-hover);
    color: var(--color-error);
  }

  .recent-search-remove svg {
    width: 1rem;
    height: 1rem;
  }

  .recent-searches-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    padding: 2rem 1rem;
    color: var(--color-text-tertiary);
    font-size: 0.875rem;
  }

  .recent-searches-empty .recent-search-icon {
    width: 2rem;
    height: 2rem;
    opacity: 0.5;
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .recent-searches-dropdown {
      transition: none;
    }
  }

  /* Mobile Search Overlay */
  .mobile-search-overlay {
    position: fixed;
    inset: 0;
    background-color: var(--color-bg-primary);
    z-index: 400;
    display: flex;
    flex-direction: column;
    opacity: 0;
    visibility: hidden;
    transform: translateY(100%);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .mobile-search-overlay.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  .mobile-search-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem;
    background-color: var(--color-bg-secondary);
    border-bottom: 1px solid var(--color-border-primary);
    flex-shrink: 0;
  }

  .mobile-search-input {
    width: 100%;
    padding: 0.75rem 1rem 0.75rem 2.75rem;
    font-size: 1rem;
    color: var(--color-text-primary);
    background-color: var(--color-bg-primary);
    border: 1px solid var(--color-border-primary);
    border-radius: 0.5rem;
    transition: all 0.15s ease-out;
  }

  .mobile-search-input::placeholder {
    color: var(--color-text-tertiary);
  }

  .mobile-search-input:focus {
    outline: none;
    border-color: var(--color-border-focus);
    box-shadow: 0 0 0 3px rgba(9, 142, 207, 0.15);
  }

  .mobile-search-close {
    flex-shrink: 0;
    padding: 0.5rem;
    color: var(--color-text-secondary);
    background: none;
    border: none;
    border-radius: 0.375rem;
    cursor: pointer;
    transition: all 0.15s ease-out;
  }

  .mobile-search-close:hover {
    color: var(--color-text-primary);
    background-color: var(--color-bg-hover);
  }

  .mobile-search-content {
    flex: 1;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  .mobile-recent-searches {
    /* Styles for recent searches container */
  }

  .mobile-search-results {
    /* Styles for search results */
  }

  .mobile-search-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    padding: 3rem 1.5rem;
    color: var(--color-text-tertiary);
  }

/* Reduced motion support for mobile search */
@media (prefers-reduced-motion: reduce) {
  .mobile-search-overlay {
    transition: none;
  }
}

/* ============================================
   AUTOCOMPLETE COMPONENT STYLES
   Reusable autocomplete/typeahead component
   Part of Issue #327 - Filter Autocomplete
   ============================================ */

/* Autocomplete wrapper - ensures proper positioning */
.autocomplete-wrapper {
  position: relative;
  display: flex;
  align-items: center;
}

/* Loading state indicator */
.autocomplete-loading {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3e%3ccircle cx='12' cy='12' r='10' stroke='%233f4447' stroke-width='2'%3e%3c/circle%3e%3cpath stroke='%23098ecf' stroke-width='2' stroke-linecap='round' d='M12 2a10 10 0 0 1 10 10'%3e%3canimateTransform attributeName='transform' type='rotate' from='0 12 12' to='360 12 12' dur='1s' repeatCount='indefinite'/%3e%3c/path%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right 0.75rem center;
  background-size: 1.25rem 1.25rem;
  padding-right: 2.5rem !important;
}

/* Clear button */
.autocomplete-clear {
  position: absolute;
  right: 0.5rem;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 1.5rem;
  height: 1.5rem;
  padding: 0;
  background: none;
  border: none;
  border-radius: 0.25rem;
  color: var(--color-text-tertiary);
  cursor: pointer;
  transition: all 0.15s ease-out;
  z-index: 1;
}

.autocomplete-clear:hover {
  color: var(--color-text-primary);
  background-color: var(--color-bg-hover);
}

.autocomplete-clear.hidden {
  display: none;
}

/* Make room for clear button in input */
.autocomplete-wrapper .form-input {
  padding-right: 2.25rem;
}

/* Dropdown container */
.autocomplete-dropdown {
  position: absolute;
  top: calc(100% + 0.25rem);
  left: 0;
  right: 0;
  max-height: 20rem; /* 320px */
  overflow-y: auto;
  background-color: var(--color-bg-tertiary);
  border: 1px solid var(--color-border-primary);
  border-radius: 0.5rem;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
  opacity: 0;
  visibility: hidden;
  transform: translateY(-8px);
  transition: all 0.15s ease-out;
  z-index: var(--z-popover);
}

.autocomplete-dropdown.active {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

/* Position above input when needed */
.autocomplete-dropdown.above {
  top: auto;
  bottom: calc(100% + 0.25rem);
  transform: translateY(8px);
}

.autocomplete-dropdown.above.active {
  transform: translateY(0);
}

/* Dropdown item */
.autocomplete-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem; /* 12px */
  cursor: pointer;
  transition: background-color 0.1s ease-out;
}

.autocomplete-item:first-child {
  border-radius: 0.5rem 0.5rem 0 0;
}

.autocomplete-item:last-child {
  border-radius: 0 0 0.5rem 0.5rem;
}

.autocomplete-item:only-child {
  border-radius: 0.5rem;
}

.autocomplete-item:hover,
.autocomplete-item.selected {
  background-color: var(--color-bg-hover);
}

.autocomplete-item.selected {
  background-color: rgba(9, 142, 207, 0.15);
}

/* Item icon container */
.autocomplete-item-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2rem;
  height: 2rem;
  border-radius: 0.375rem;
  flex-shrink: 0;
}

/* Icon variants based on entity type */
.autocomplete-icon-default {
  background-color: rgba(9, 142, 207, 0.15);
  color: var(--color-accent-blue);
}

.autocomplete-icon-channel {
  background-color: rgba(122, 120, 118, 0.15);
  color: var(--color-text-secondary);
}

.autocomplete-icon-guild {
  background-color: rgba(203, 78, 27, 0.15);
  color: var(--color-accent-orange);
  border-radius: 0.25rem;
}

/* Item text */
.autocomplete-item-text {
  flex: 1;
  font-size: 0.875rem;
  color: var(--color-text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Item metadata (e.g., channel type) */
.autocomplete-item-meta {
  font-size: 0.75rem;
  color: var(--color-text-tertiary);
  flex-shrink: 0;
}

/* No results message */
.autocomplete-no-results {
  padding: 1rem;
  text-align: center;
  font-size: 0.875rem;
  color: var(--color-text-tertiary);
}

/* Error message */
.autocomplete-error {
  padding: 1rem;
  text-align: center;
  font-size: 0.875rem;
  color: var(--color-error);
}

/* Screen reader only utility (if not already defined) */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .autocomplete-dropdown {
    transition: none;
  }

  .autocomplete-loading {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24'%3e%3ccircle cx='12' cy='12' r='10' stroke='%23098ecf' stroke-width='2' stroke-dasharray='32' stroke-dashoffset='0'%3e%3c/circle%3e%3c/svg%3e");
  }
}

/* ==========================================================================
   Preview Popup Component
   Handles user and guild profile preview popups on hover
   ========================================================================== */

/* Preview trigger styling */
.preview-trigger {
  cursor: pointer;
  border-bottom: 1px dashed transparent;
  transition: border-color 0.15s ease-out, color 0.15s ease-out;
  /* Ensure inline elements can receive focus */
  display: inline-block;
}

.preview-trigger:hover,
.preview-trigger:focus {
  border-bottom-color: var(--color-accent-blue);
}

.preview-trigger:focus-visible {
  outline: 2px solid var(--color-border-focus);
  outline-offset: 2px;
  border-radius: 2px;
}

/* Touch target sizing for accessibility (WCAG 2.5.5 - minimum 44x44px) */
@media (pointer: coarse) {
  .preview-trigger {
    /* Increase touch target size while keeping visual appearance compact */
    position: relative;
    min-height: 44px;
    display: inline-flex;
    align-items: center;
  }

  /* Extend clickable area without visual change */
  .preview-trigger::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    min-width: 44px;
    min-height: 44px;
    width: 100%;
    height: 100%;
  }
}

/* Preview popup container - base styles */
.preview-popup,
.preview-popup-container {
  /* Dimensions set via Tailwind classes in JS */
}

/* Preview popup header */
.preview-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem;
  border-bottom: 1px solid var(--color-border-secondary);
  background-color: var(--color-bg-secondary);
}

.preview-avatar {
  flex-shrink: 0;
}

.preview-identity {
  flex: 1;
  min-width: 0;
}

.preview-username {
  display: block;
  font-weight: 600;
  color: var(--color-text-primary);
  font-size: 0.875rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.preview-displayname {
  display: block;
  font-size: 0.8125rem;
  color: var(--color-text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Preview popup body */
.preview-body {
  padding: 0.875rem 1rem;
}

.preview-meta {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.preview-meta-item {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  font-size: 0.8125rem;
}

/* Preview popup footer */
.preview-footer {
  display: flex;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  background-color: var(--color-bg-secondary);
  border-top: 1px solid var(--color-border-secondary);
}

/* Feature tags in guild previews */
.preview-feature-tag {
  display: inline-block;
  font-size: 0.625rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.025em;
}

/* Guild icons are square with rounded corners */
.preview-popup-guild .preview-avatar img {
  border-radius: 0.375rem;
}

/* Reduced motion support for preview popups */
@media (prefers-reduced-motion: reduce) {
  .preview-popup-container {
    transition: opacity 0.1s ease-out !important;
    transform: none !important;
  }
}

/* ==========================================================================
   Guild Header Glass UI - Issue #1049
   Glass-style status pill and secondary action buttons
   ========================================================================== */

/* Design Tokens */
:root {
  /* Glass Effect Backgrounds */
  --color-glass-bg: rgba(47, 51, 54, 0.4);
  --color-glass-bg-hover: rgba(54, 58, 62, 0.5);
  --color-glass-bg-active: rgba(47, 51, 54, 0.6);

  /* Glass Borders */
  --color-glass-border: rgba(63, 68, 71, 0.6);
  --color-glass-border-hover: rgba(9, 142, 207, 0.4);

  /* Backdrop Blur */
  --glass-blur: blur(8px);

  /* Status Indicator Colors */
  --color-status-active: #10b981;
  --color-status-active-bg: rgba(16, 185, 129, 0.12);
  --color-status-active-border: rgba(16, 185, 129, 0.3);

  --color-status-inactive: #7a7876;
  --color-status-inactive-bg: rgba(122, 120, 118, 0.12);
  --color-status-inactive-border: rgba(122, 120, 118, 0.3);
}

/* Glass Pill Status Indicator */
.status-glass {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.375rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.875rem;
  font-weight: 600;
  line-height: 1.5;
  white-space: nowrap;
  border-width: 1px;
  border-style: solid;
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  transition: all 0.15s ease-in-out;
}

.status-glass.status-active {
  background-color: var(--color-status-active-bg);
  border-color: var(--color-status-active-border);
  color: var(--color-status-active);
}

.status-glass.status-inactive {
  background-color: var(--color-status-inactive-bg);
  border-color: var(--color-status-inactive-border);
  color: var(--color-status-inactive);
}

.status-glass .status-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
}

.status-glass.status-active .status-dot {
  background-color: var(--color-status-active);
  box-shadow: 0 0 8px rgba(16, 185, 129, 0.4);
}

.status-glass.status-inactive .status-dot {
  background-color: var(--color-status-inactive);
}

/* Glass Button Style */
.btn-glass {
  background-color: var(--color-glass-bg);
  border-color: var(--color-glass-border);
  color: #d7d3d0;
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
}

.btn-glass:hover:not(:disabled) {
  background-color: var(--color-glass-bg-hover);
  border-color: var(--color-glass-border-hover);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.btn-glass:active:not(:disabled) {
  background-color: var(--color-glass-bg-active);
  border-color: rgba(9, 142, 207, 0.5);
  transform: translateY(0);
  box-shadow: none;
}

.btn-glass:focus-visible {
  outline: 2px solid #098ecf;
  outline-offset: 2px;
}

.btn-glass:disabled {
  background-color: rgba(47, 51, 54, 0.3);
  border-color: rgba(63, 68, 71, 0.4);
  color: #7a7876;
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

.btn-glass svg {
  width: 1.25rem;
  height: 1.25rem;
  color: currentColor;
}

/* Fallback for Browsers Without Backdrop Filter */
@supports not (backdrop-filter: blur(8px)) {
  .status-glass,
  .btn-glass {
    /* Slightly more opaque background for readability without blur */
    background-color: rgba(47, 51, 54, 0.6);
  }

  .status-glass.status-active {
    background-color: rgba(16, 185, 129, 0.18);
  }

  .status-glass.status-inactive {
    background-color: rgba(122, 120, 118, 0.18);
  }

  .btn-glass:hover:not(:disabled) {
    background-color: rgba(54, 58, 62, 0.7);
  }
}

/* Reduced motion support for glass elements */
@media (prefers-reduced-motion: reduce) {
  .status-glass,
  .btn-glass {
    transition: none;
  }
}

/* ============================================
   GUILD NAVIGATION COMPONENTS
   ============================================ */

/* Guild Navigation Tabs (Desktop) */
.guild-nav-container {
  position: relative;
}

.guild-nav-tabs {
  display: flex;
  gap: 0.25rem;
  padding: 0.25rem;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border-primary);
  border-radius: 0.75rem;
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.guild-nav-tabs::-webkit-scrollbar {
  display: none;
}

.guild-nav-tab {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.625rem 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--color-text-secondary);
  background: transparent;
  border-radius: 0.5rem;
  text-decoration: none;
  white-space: nowrap;
  transition: all 0.15s ease-out;
}

.guild-nav-tab:hover {
  color: var(--color-text-primary);
  background: var(--color-bg-hover);
}

.guild-nav-tab:focus-visible {
  outline: 2px solid var(--color-accent-blue);
  outline-offset: 2px;
}

.guild-nav-tab.active {
  color: var(--color-text-primary);
  background: var(--color-bg-tertiary);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.guild-nav-tab .tab-icon {
  width: 1.125rem;
  height: 1.125rem;
  flex-shrink: 0;
}

.guild-nav-tab.active .tab-icon {
  color: var(--color-accent-blue);
}

/* Guild Navigation Dropdown (Mobile) */
.guild-nav-dropdown {
  position: relative;
}

.guild-nav-dropdown-button {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 0.75rem 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--color-text-primary);
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border-primary);
  border-radius: 0.75rem;
  transition: all 0.15s ease-out;
}

.guild-nav-dropdown-button:hover {
  border-color: var(--color-border-focus);
}

.guild-nav-dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  margin-top: 0.5rem;
  background: var(--color-bg-tertiary);
  border: 1px solid var(--color-border-primary);
  border-radius: 0.75rem;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  overflow: hidden;
  z-index: var(--z-popover);
}

.guild-nav-dropdown-item {
  display: block;
  padding: 0.75rem 1rem;
  font-size: 0.875rem;
  color: var(--color-text-primary);
  text-decoration: none;
  transition: background 0.15s ease-out;
}

.guild-nav-dropdown-item:hover {
  background: var(--color-bg-hover);
}

.guild-nav-dropdown-item:focus-visible {
  outline: 2px solid var(--color-accent-blue);
  outline-offset: -2px;
}

.guild-nav-dropdown-item.active {
  background: var(--color-bg-hover);
  font-weight: 600;
}

/* Mobile responsive */
@media (max-width: 640px) {
  .guild-nav-tab {
    padding: 0.5rem 0.875rem;
    font-size: 0.8125rem;
  }

  .guild-nav-tab .tab-icon {
    width: 1rem;
    height: 1rem;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .guild-nav-tab,
  .guild-nav-dropdown-button,
  .guild-nav-dropdown-item {
    transition: none;
  }
}
