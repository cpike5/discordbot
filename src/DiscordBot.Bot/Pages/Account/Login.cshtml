@page
@model LoginModel
@{
    ViewData["Title"] = "Sign In";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"] - Discord Bot Admin</title>
    <link rel="stylesheet" href="~/css/app.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/login.css" asp-append-version="true" />
</head>
<body>

    <div class="login-container">

        <!-- Left Panel: Brand Experience -->
        <aside class="login-brand-panel">
            <!-- Floating particles -->
            <div class="login-particles">
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
            </div>

            <div class="login-brand-content">

                <!-- Logo -->
                <div class="login-brand-logo">
                    <div class="login-brand-logo-container">
                        <svg class="login-brand-logo-icon" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20.317 4.492c-1.53-.69-3.17-1.2-4.885-1.49a.075.075 0 0 0-.079.036c-.21.369-.444.85-.608 1.23a18.566 18.566 0 0 0-5.487 0 12.36 12.36 0 0 0-.617-1.23A.077.077 0 0 0 8.562 3c-1.714.29-3.354.8-4.885 1.491a.07.07 0 0 0-.032.027C.533 9.093-.32 13.555.099 17.961a.08.08 0 0 0 .031.055 20.03 20.03 0 0 0 5.993 2.98.078.078 0 0 0 .084-.026 13.83 13.83 0 0 0 1.226-1.963.074.074 0 0 0-.041-.104 13.201 13.201 0 0 1-1.872-.878.075.075 0 0 1-.008-.125c.126-.093.252-.19.372-.287a.075.075 0 0 1 .078-.01c3.927 1.764 8.18 1.764 12.061 0a.075.075 0 0 1 .079.009c.12.098.245.195.372.288a.075.075 0 0 1-.006.125c-.598.344-1.22.635-1.873.877a.075.075 0 0 0-.041.105c.36.687.772 1.341 1.225 1.962a.077.077 0 0 0 .084.028 19.963 19.963 0 0 0 6.002-2.981.076.076 0 0 0 .032-.054c.5-5.094-.838-9.52-3.549-13.442a.06.06 0 0 0-.031-.028zM8.02 15.278c-1.182 0-2.157-1.069-2.157-2.38 0-1.312.956-2.38 2.157-2.38 1.21 0 2.176 1.077 2.157 2.38 0 1.312-.956 2.38-2.157 2.38zm7.975 0c-1.183 0-2.157-1.069-2.157-2.38 0-1.312.955-2.38 2.157-2.38 1.21 0 2.176 1.077 2.157 2.38 0 1.312-.946 2.38-2.157 2.38z" />
                        </svg>
                    </div>
                </div>

                <div class="login-brand-text">
                    <!-- Title & Tagline -->
                    <h1 class="login-brand-title">Discord Bot Admin</h1>
                    <p class="login-brand-tagline">
                        Powerful bot management at your fingertips
                    </p>

                    <!-- Feature List -->
                    <ul class="login-brand-features">
                        <li class="login-brand-feature">
                            <svg class="login-brand-feature-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                            </svg>
                            <span>Powerful bot management</span>
                        </li>
                        <li class="login-brand-feature">
                            <svg class="login-brand-feature-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                            </svg>
                            <span>Real-time analytics</span>
                        </li>
                        <li class="login-brand-feature">
                            <svg class="login-brand-feature-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                            </svg>
                            <span>Secure Discord integration</span>
                        </li>
                    </ul>
                </div>

            </div>
        </aside>

        <!-- Right Panel: Login Form -->
        <main class="login-form-panel">
            <div class="login-form-container">

                <!-- Form Header -->
                <header class="login-form-header">
                    <h2 class="login-form-title">Welcome back</h2>
                    <p class="login-form-subtitle">Sign in to access your dashboard</p>
                </header>

                <!-- Error Alert -->
                @if (!string.IsNullOrEmpty(Model.ErrorMessage))
                {
                    <div class="login-error-alert" role="alert" aria-live="polite">
                        <svg class="login-error-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                        </svg>
                        <div class="login-error-content">
                            <p class="login-error-title">Login failed</p>
                            <p class="login-error-message">@Model.ErrorMessage</p>
                        </div>
                    </div>
                }

                <!-- Validation Summary -->
                <div asp-validation-summary="ModelOnly" class="login-error-alert validation-summary-errors" role="alert"></div>

                @if (Model.IsDiscordOAuthConfigured)
                {
                    <!-- Discord OAuth Button (Primary CTA) -->
                    <form method="post" asp-page-handler="DiscordLogin">
                        <input type="hidden" asp-for="ReturnUrl" value="@Model.ReturnUrl" />
                        <button type="submit" class="btn-discord-oauth btn-ripple">
                            <svg class="btn-discord-oauth-icon" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z" />
                            </svg>
                            <span class="btn-text">Continue with Discord</span>
                        </button>
                    </form>

                    <!-- Divider -->
                    <div class="login-divider">
                        <span class="login-divider-text">Or use your email</span>
                    </div>
                }

                <!-- Email/Password Form -->
                <form method="post" id="login-form">
                    <input type="hidden" asp-for="ReturnUrl" value="@Model.ReturnUrl" />

                    <!-- Email Field -->
                    <div class="form-group-floating">
                        <input
                            asp-for="Input.Email"
                            type="email"
                            id="email"
                            class="form-input-floating"
                            placeholder=" "
                            autocomplete="email"
                            required
                            aria-required="true"
                            aria-describedby="email-error"
                        />
                        <label for="email" class="form-label-floating">Email address</label>
                        <span id="email-error" class="form-error" role="alert" asp-validation-for="Input.Email"></span>
                    </div>

                    <!-- Password Field -->
                    <div class="form-group-floating password-group">
                        <input
                            asp-for="Input.Password"
                            type="password"
                            id="password"
                            class="form-input-floating"
                            placeholder=" "
                            autocomplete="current-password"
                            required
                            aria-required="true"
                            aria-describedby="password-error"
                        />
                        <label for="password" class="form-label-floating">Password</label>
                        <button
                            type="button"
                            class="password-toggle"
                            aria-label="Show password"
                            aria-pressed="false"
                        >
                            <svg class="password-toggle-icon password-show" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            </svg>
                            <svg class="password-toggle-icon password-hide hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
                            </svg>
                        </button>
                        <span id="password-error" class="form-error" role="alert" asp-validation-for="Input.Password"></span>
                    </div>

                    <!-- Remember Me -->
                    <div class="remember-me-container">
                        <input
                            asp-for="Input.RememberMe"
                            type="checkbox"
                            id="remember-me"
                            class="remember-me-checkbox"
                        />
                        <label for="remember-me" class="remember-me-checkbox-custom">
                            <svg class="remember-me-checkmark" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                            </svg>
                        </label>
                        <label for="remember-me" class="remember-me-label">Remember me</label>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="btn-submit-login btn-ripple">
                        <span class="btn-text">Sign in with Email</span>
                    </button>

                </form>

            </div>
        </main>

    </div>

    <script src="~/js/login.js" asp-append-version="true"></script>
    <partial name="_ValidationScriptsPartial" />

</body>
</html>
